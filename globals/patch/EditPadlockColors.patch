%Padlock colors
%Problem: its a texture
%Solution: just change the palettes?

%the padlocks have very similar data so I have 3 potential locations
%	^	The model data is identical
%yellow face, red face, blue face?
%Need to figure this out
%E5AB50
%E5E730
%E60550

%First line = 	00080000FFFB0000FEA8004E747474FF
%	%    X        Y        Z                 U        V         R   G   B   A     pos
%	     8`s      0`s     -5`s    0000s    -344`s     78`s      74b 74b 74b FFb   %  0

%80265DC0	(In cav_06)

%Look at + B00


%5 bits per color, 1 bit for alpha
%Each color gets 2 bytes
/%
% 00000B00 --> 0A000B00
#new:Data $IntTable_0A000B00
{
	A445C54D 9C058B85 93C3B4C9 AC8FA447 BD0B9BC5 9BC393C5 AC47C58D AC87AC45
	93818385 E6A1B489 EF2BEF2D 8B438343 E6E9AC89 D617DE59 BD15B50B BD4D93C9
	E6A9BD0D 9C09DE5F 9C4B93C7 CD8DBD55 BD57B4CB 9C07C54B E6EB9C0B 8B83C597
	C54FC599 D659E6E1 82D4016F 00000000 00000000 00000000 00000000 00000000
	00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
	00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
	00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
	00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
	00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
	00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
	00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
	00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
	00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
	00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
	00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
	00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
}
%/

%why do they have so many colors?

%4, 4, 4, 1 = 00100 00100 00100 1 = 0010 0001 0000 1001 = 2109
%8, 8, 8, 1 = 01000 01000 01000 1 = 0100 0010 0001 0001 = 4211

#new:Data $IntTable_DefaultLockColors
{
	A445C54D 9C058B85 93C3B4C9 AC8FA447 BD0B9BC5 9BC393C5 AC47C58D AC87AC45
	93818385 E6A1B489 EF2BEF2D 8B438343 E6E9AC89 D617DE59 BD15B50B BD4D93C9
	E6A9BD0D 9C09DE5F 9C4B93C7 CD8DBD55 BD57B4CB 9C07C54B E6EB9C0B 8B83C597
	C54FC599 D659E6E1 82D4016F 00000000 00000000 00000000 00000000 00000000
}

#new:Data $IntTable_DarkLockColors
{
	42122109 21092109 21092109 21092109 21092109 21092109 21092109 21092109 
	21092109 21092109 21092109 21092109 21092109 21092109 21092109 21092109 
	21092109 21092109 21092109 21092109 21092109 21092109 21092109 21092109 
	21092109 21092109 21092109 00000000
}

#export:Data $LockFlag
{
	00000000
}

#export:Data $LockPalettePointer
{
	$IntTable_DefaultLockColors
}

#export:Data $LockLocation
{
	00000000
}

#export:Function $FindLockPalettePointer
{
	PUSH	S0, S1, S2, S3
	LAB		S0, 800740AB	%Area byte
	%Check against every area
	LI		S1, 1C
	BEQ		S0, S1, .black
	LI		S1, 1D
	BEQ		S0, S1, .black
	LI		S1, 1E
	BEQ		S0, S1, .black
	NOP
	.rainbow
	LI		S3, $IntTable_DefaultLockColors
	BEQ		R0, R0, .end
	NOP
	.black
	LI		S3, $IntTable_DarkLockColors
	BEQ		R0, R0, .end
	NOP
	.end
	SAW		S3, $LockPalettePointer
	POP		S0, S1, S2, S3
	JR		RA
	NOP
}

%function that will work with the above data structures
%Will not copy if the first value is identical for both
%A0 = int table
#export:Function $SetLockColorWithTable
{
	PUSH	RA, S0, S1, S2, S3
	LAW		S3, $IntTable_DefaultLockColors
	LAW		S0, $LockLocation		%<-- will cause problems if invalid pointer			%The stuff around here doesn't seem to affect anything
	LUI		S1, 8000
	AND		S1, S0, S1
	BEQ		S1, R0, .end
	NOP
	ADDI	S0, S0, B00
	LW		S1, 0 (S0)
	LW		S2, 0 (A0)
	BNE		S1, S3, .end
	NOP
	BEQ		S1, S2, .end
	NOP
	.looptop
	LW		S1, 0 (A0)
	BEQ		S1, R0, .end
	NOP	
	SW		S1, 0 (S0)
	ADDI	S0, S0, 4
	ADDI	A0, A0, 4
	BEQ		R0, R0, .looptop
	NOP
	.end
	JPOP	RA, S0, S1, S2, S3
}