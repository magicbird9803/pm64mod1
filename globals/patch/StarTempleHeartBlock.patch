%Make the healing block in the star temple heal star power too
%	I somehow broke the regular star power regain system, so this is a substitute
%	Also the star power regain is s l o w

%	Actually... I'll make it always give you star power because why not

%right before recovering HP and FP
%  1E0:  SB        R0, 3 (S0)
%  1E4:  ADDIU     V0, V0, 5

%106684 --> 802E4E04
@Hook 106864		%802E4FE4
{
	PUSH		V0, S0, S1
	LAB			S0, 800740AB	%Area byte
	%Not in the final area (not like you can even use star power there)
	LI			S1, 1E
	BEQ			S0, S1, .end
	NOP
	LI			S0, 8010F290
	LB			V0, 28E (S0)	%Max star power
	SB			V0, 290 (S0)	%Store to total star power
	SB			R0, 291 (S0)	%Store to total star power
	.end
	POP			V0, S0, S1
	SB      	R0, 3 (S0)
	J			802E4FEC
	ADDIU     	V0, V0, 5
}

%Remove star power when in the final area
#export:Function $StarPowerRemoval
{
	PUSH		V0, S0, S1
	LAB			S0, 800740AB	%Area byte
	LI			S1, 1E
	BNE			S0, S1, .end
	NOP
	LI			S0, 8010F290
	SB			R0, 290 (S0)	%Store to total star power
	SB			R0, 291 (S0)	%Store to total star power
	.end		
	POP			V0, S0, S1
	JR			RA
	NOP
}